# ============================================================
# Apex-Bybit 流动性套利配置
# A所 = Apex Pro（流动性来源 + 现货/合约价格参考）
# B所 = Bybit（执行套利下单的壳子账户）
# ============================================================

# ---------- Apex Pro 配置（A所）----------
apex:
  base_url: "https://pro.apex.exchange"          # Apex Pro 主网 REST 地址
#  base_url: "https://testnet.pro.apex.exchange"  # 测试网 REST 地址
  ws_url: "wss://pro.apex.exchange/realtime"      # WebSocket 地址
  api_key: ""        # 填入你的 Apex API Key
  api_secret: ""     # 填入你的 Apex API Secret
  passphrase: ""     # 填入你的 Apex Passphrase

# ---------- Bybit 配置（B所 / 壳子账户）----------
bybit:
  base_url: "https://api.bybit.com"              # Bybit 主网 REST 地址
#  base_url: "https://api-testnet.bybit.com"     # 测试网 REST 地址
  ws_url: "wss://stream.bybit.com/v5/public/linear"  # Bybit 公共 WS（行情）
  api_key: ""        # 填入你的 Bybit API Key
  api_secret: ""     # 填入你的 Bybit API Secret

# ---------- 交易对配置 ----------
# Apex 格式：BTC-USDC
# Bybit 格式：BTCUSDT（永续合约）
apex_symbol: "BTC-USDC"
bybit_symbol: "BTCUSDT"

# ---------- 运行模式 ----------
# 1 = 模型一：被动价差套利（等待两所自然价差）
# 2 = 模型二：跨交易所联动套利 + 做市商被动抬价（主动推价）
mode: 1

# ---------- 套利策略参数 ----------
strategy:
  # 触发套利的最小价差（USDC）
  # Apex 买一价 与 Bybit 买一价 之差超过此值才开仓
  min_spread_usdc: 1.0

  # 单笔下单量（合约张数）
  order_size: 0.001

  # 最大净持仓量（合约张数，超过后停止同向开仓）
  max_position: 0.01

  # 套利方向检查间隔（毫秒）
  check_interval_ms: 200

  # 盈利目标（USDC，达到后程序自动退出）
  take_profit_usdc: 100.0

  # 止损（USDC，超过后程序自动退出）
  stop_loss_usdc: 30.0

  # 价格精度（小数位数）
  price_precision: 1

  # 数量精度（小数位数）
  size_precision: 3

  # 对冲模式：true=开仓同时在对面所对冲，false=单腿开仓
  hedge_mode: true

  # 对冲滑点容忍（USDC）：对冲腿允许的最大滑点
  hedge_slippage_usdc: 0.5

# ---------- 风控参数 ----------
risk_control:
  # 单日最大亏损（USDC），超过后熔断停止
  max_daily_loss_usdc: 50.0

  # 最大连续亏损次数，超过后需人工重置
  max_consecutive_loss: 5

  # 账户最低可用余额（USDC），低于此值停止交易
  min_balance_usdc: 200.0

# ---------- 模型二参数（mode: 2 时生效）----------
model2:
  # Bybit 永续合约埋伏仓位大小（合约张数）
  # 推价前提前做多，仓位越大利润越高，但风险也越大
  ambush_size: 0.01

  # Apex 每轮推价买入量（合约张数）
  # 每轮买入此数量，推高 Apex 现货价格
  push_order_size: 0.005

  # 推价总轮次（每轮间隔 push_interval_ms 毫秒）
  # 总推价量 = push_order_size × push_rounds
  push_rounds: 5

  # 推价间隔（毫秒）
  push_interval_ms: 500

  # 推价滑点（相对于卖一价的比例，0.001 = 0.1%）
  # 买入价 = 卖一价 × (1 + push_price_slippage)，确保成交并推动价格
  push_price_slippage: 0.001

  # 每张合约的止盈目标（USDC）
  # Bybit 永续价格每张涨幅达到此值时平仓
  take_profit_per_unit: 5.0

  # 每张合约的止损（USDC）
  # 浮亏超过此值时强制平仓
  stop_loss_per_unit: 3.0

  # 总盈利目标（USDC），达到后停止策略
  total_take_profit_usdc: 200.0

  # 总止损（USDC），超过后停止策略
  total_stop_loss_usdc: 80.0

  # 等待价格传导超时（秒），超时后强制平仓
  transmission_timeout_sec: 60

  # 每轮结束后的冷却时间（秒），等待市场恢复
  cooldown_sec: 30

  # 策略检查间隔（毫秒）
  check_interval_ms: 300
